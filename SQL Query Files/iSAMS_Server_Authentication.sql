SELECT TOP(1) [x].[txtUserCode], [x].[txtStatus], [x].[txtEmailAddress], [x].[intFailedLogins], [x].[intFailedLoginsDisabled], [x].[txtFirstName], [x].[txtHomepage], [x].[TbliSAMSManagerUsersID], [x].[intIdentityProviderId], [x].[intAPLogin], [x].[intBXILogin], [x].[intiSAMSLogin], [x].[intPPLogin], [x].[intReadTerms], [x].[intSPLogin], [x].[txtLastDisabledLoginDate], [x].[txtLastFailedLoginDateTime], [x].[txtLoginDateTime], [x].[txtNickname], [x].[txtPassword], [x].[dtePasswordChanged], [x].[intReset], [x].[intPasswordVersion], [x].[guidPersonUniqueId], [x].[txtSchoolID], [x].[intGroupID], [x].[txtSecurityId], [x].[txtQuestion], [x].[txtAnswer], [x].[intAnswerVersion], [x].[intQuestionVersion], [x].[txtSurname], [x].[txtTitle], [x].[blnTwoFactorAuthenticationConfigured], [x].[blnTwoFactorAuthenticationEnabled], [x].[txtUserType], [x].[txtUsername], [x.IdentityProvider].[TblIdentityProviderId], [x.IdentityProvider].[txtConfiguration], [x.IdentityProvider].[intIdentityProviderTypeId], [x.IdentityProvider].[txtName], [x.IdentityProvider].[blnTwoFactorAuthenticationEnabled]
FROM [auth].[vwUser] AS [x]
LEFT JOIN [auth].[vwIdentityProvider] AS [x.IdentityProvider] ON [x].[intIdentityProviderId] = [x.IdentityProvider].[TblIdentityProviderId]
WHERE LOWER([x].[txtUserCode]) = @__ToLower_0
ORDER BY [x].[txtUserCode]
